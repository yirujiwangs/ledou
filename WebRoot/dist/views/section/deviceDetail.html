<div ng-include="'views/nav.html'"></div>
<div class='main'>
	<div class="panel panel-default">
	    <div class="panel-heading">
	      <h3 class="panel-title">数据指标<span>{{deviceDetailCtrl.deviceDetail.storeName}}({{deviceDetailCtrl.deviceDetail.account}})</span></h3>
	    </div>
	    <div class="panel-body">
	    	<div class='panel-items col-xs-3'>
	    		<p>总设备数</p>
	    		<p class="panel-items-num-xs">
	    			{{deviceDetailCtrl.items.totalNum}}
	    		</p>
	    	</div>
	    	<div class='panel-items col-xs-3'>
	    		<p>使用中设备数</p>
	    		<p class="panel-items-num-xs">
	    			{{deviceDetailCtrl.items.usingNum}}
	    		</p>
	    	</div>
	    	<div class='panel-items col-xs-3'>
	    		<p>未使用设备数</p>
	    		<p class="panel-items-num-xs">
	    			{{deviceDetailCtrl.items.unUsingNum}}
	    		</p>
	    	</div>
	    	<div class='panel-items col-xs-3'>
	    		<p>设备分组数</p>
	    		<p class="panel-items-num-xs">
	    			{{deviceDetailCtrl.items.groupNum}}
	    		</p>
	    	</div>
	    </div>
	</div>

	<table class="table table-hover table-reponsive">
		<div class='table-func clearfix'>
			<form class="form-inline clearfix">
				<div class="form-group col-xs-7 m-t-lg">
					<button class="t-btn t-btn-green pull-left" ng-click="deviceDetailCtrl.addDevice()">绑定设备</button>
					<div class="col-xs-8 pull-right">
						<label class="control-label pull-left">时间:</label>
						<div ng-include="'views/dateTime.html'"></div>
					</div>
				</div>
				<div class="form-group col-xs-2 m-t-lg">
					<select 
						class="col-xs-9 pull-right" 
						ng-model="form.type" 
						ng-options="option.name as option.name for option in deviceDetailCtrl.status" 
						ng-change="deviceDetailCtrl.search()" 
						style="width:100%;"
					></select>
				</div>
				<div class="form-group col-xs-3 m-t-lg pull-right">
					<input type="text" ng-model="form.searchkey" placeholder="请输入设备的序列号" style="min-width: 170px;">	
					<button class="t-btn t-btn-green pull-right" ng-click="deviceDetailCtrl.search()">查找</button>
				</div>
			</form>
		</div>
		<thead>
			<th ng-repeat="title in deviceDetailCtrl.titles">
				{{title.name}}
			</th>
		</thead>
		<tbody>
			<tr ng-repeat="user in deviceDetailCtrl.users">
				<td>{{user.serialNum}}</td>
				<td>{{user.ibeaconId}}</td>
				<!-- <td>{{user.uuid}}</td> -->
				<!-- <td>{{user.major}}</td> -->
				<!-- <td>{{user.minor}}</td> -->
				<!-- <td>{{user.type}}</td> -->
				<td>{{user.status}}</td>
				<td>
					{{deviceDetailCtrl.conversion(user.createTime)}}
				</td>
				<td>{{user.remark}}</td>
				<td>
					<!-- <button class="t-btn t-btn-green" ng-click="deviceDetailCtrl.update($index)">修改
					</button> -->
					<!-- <button class="t-btn t-btn-blue" ng-click="deviceDetailCtrl.del($index)">删除
					</button> -->
					<button class="t-btn t-btn-green" ng-click="deviceDetailCtrl.removeBind($index)">
						解除绑定
					</button>
				</td>
			</tr>
		</tbody>
	</table>

</div>